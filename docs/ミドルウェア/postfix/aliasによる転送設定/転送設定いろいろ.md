## 正規表現を使用しない設定方法
### Toアドレスが「mail@example.com」の場合、「mail2@example.com」へ転送

```conf
mail:  mail2@example.com
```

### Toアドレスが「shell@example.com」の場合、shell.shに使用して処理する

```conf
shell:  |"/etc/posfix/script/shell.sh"
```

### Toアドレスが「java@example.com」の場合、javaに渡して処理する

```conf
java:  |"/usr/bin/java -jar /etc/postfix/script/java.jar"
```

## 正規表現を使用した設定方法
### alias_mapsの設定変更

- /etc/postfix/main.cf

```conf
#alias_maps = hash:/etc/aliases
alias_maps = hash:/etc/aliases,regexp:/etc/postfix/aliases.regexp
```

### aliases.regexpに正規表現でアドレスを指定し、その後に処理を追加する
#### Toアドレスが「mail-12345678-9AB@example.com」などの場合、mail2@example.comへ転送

```conf
/^piyo-[0-9]{8}-[a-zA-Z0-9]{3}(@example.com)?$/ mail2@example.com
```

#### Toアドレスが「shell-12345678-9AB@example.com」などの場合、shell.shに渡して処理する

```
/^shell-[0-9]{8}-[a-zA-Z0-9]{3}(@example.com)?$/  |"/etc/posfix/script/shell.sh"
```

#### Toアドレスが「java-12345678-9AB@example.com」などの場合、javaに渡して処理する

```
/^java-[0-9]{8}-[a-zA-Z0-9]{3}(@example.com)?$/  |"/usr/bin/java -jar /etc/postfix/script/java.jar"
```

## その他
シェルやjavaのプログラムに渡す際はそのプログラムの権限の考慮が必要になる。  
デフォルトでは下記にある通り、nobodyで実行される。  

- /etc/postfix/main.cf

```
# The default_privs parameter specifies the default rights used by
#default_privs = nobody
```