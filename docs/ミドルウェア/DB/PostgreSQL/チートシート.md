# PostgreSQL コマンドチートシート

## 作成

### ユーザ作成

```sql
create user {ユーザ名} with password {パスワード};
```

### パスワード設定

```sql
\password {ユーザー名}
```

### データベース作成

```sql
create database {データベース名} owner = {ユーザ名};
```

---

## 参照

### ユーザ一覧を表示

```sql
\du
```

### データベース一覧を表示

```sql
\l
```

### 接続中のデータベース情報を表示

```sql
\conninfo
```

### テーブル一覧を表示

```sql
\dt
```

### テーブル定義を表示

```sql
\d [テーブル名]
```

### コマンドライン履歴の表示

```sql
\s
```

### データベース切り替え

```sql
\c [データベース名]
```

### インストール済みプラグインを表示

```sql
\dx
```

### データベースの統計情報を表示

```sql
select * from pg_stat_database;
```

### テーブルの統計情報を表示

```sql
select * from pg_stat_user_tables;
```

---

## バックアップ

### データベース全体のバックアップ

```bash
pg_dumpall -U postgres > dumpall.sql
```

### データベース単位のバックアップ

```bash
pg_dump -U postgres {データベース名} > database.sql
```

### テーブル単位のバックアップ

```bash
pg_dump -U postgres -t {テーブル名} {データベース名} > table.sql
```

---

## システム関連

### リカバリーモード（スレーブ）かどうか確認

```sql
SELECT pg_is_in_recovery();
```
